<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sell Items</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        form { display: grid; gap: 15px; }
        label { font-weight: bold; }
        input, textarea, select { width: 100%; padding: 8px; margin-bottom: 10px; }
        button { background: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; }
        .image-preview { max-width: 200px; margin-top: 10px; display: none; }
    </style>
</head>
<body>
    <h1>Sell Your Item</h1>
    <form id="sellForm">
        <label>Item Name: <input type="text" id="itemName" required></label>el>
        <label>Price (Rupees): <input type="number" id="itemPrice" min="0" step="0.01" required></label>
        <label>Category:
            <select id="itemCategory" required>
                <option value="">Select category</option>
                <option value="electronics">Electronics</option>
                <option value="furniture">Furniture</option>
                <option value="clothing">Clothing</option>
                <option value="clothing">Books</option>
               <option value="clothing">Stationary</option>
            </select>
        </label>
        <label>Your Contact: <input type="text" id="sellerContact" required></label>
        <label>Post Image: <input type="file" id="itemImage" accept="image/*"></label>
        <img id="imagePreview" class="image-preview">
        <button type="submit">List Item</button>
    </form>

    <script>
        // Image preview
        document.getElementById('itemImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = event.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        // Form submission
        document.getElementById('sellForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData();
            formData.append('name', document.getElementById('itemName').value);
            formData.append('description', document.getElementById('itemDescription').value);
            formData.append('price', document.getElementById('itemPrice').value);
            formData.append('category', document.getElementById('itemCategory').value);
            formData.append('contact', document.getElementById('sellerContact').value);
            
            const imageFile = document.getElementById('itemImage').files[0];
            if (imageFile) formData.append('image', imageFile);

            try {
                const response = await fetch('http://localhost:3000/api/items', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) throw new Error('Failed to submit');
                
                alert('Item listed successfully!');
                this.reset();
                document.getElementById('imagePreview').style.display = 'none';
            } catch (error) {
                alert('Error: ' + error.message);
            }
        });
    </script>
</body>
</html>
